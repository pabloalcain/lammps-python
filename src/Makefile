LDFLAGS=-L$(LAMMPS)/src
LDLIBS=-llammps -lmpi -lpthread
INFLAGS=-I$(LAMMPS)/src
CXXFLAGS=-Wno-write-strings -g -O0 -fPIC


library: gofr.o minkowski.o
	mpic++ $(LDFLAGS) gofr.o minkowski.o $(LDLIBS) -shared -o libanalysis.so

install: library
	cp libanalysis.so /usr/local/lib

simple: simple.o gofr.o minkowski.o
	mpic++ $(LDFLAGS) simple.o gofr.o minkowski.o $(LDLIBS) -o simple.e

simple.o: simple.cpp gofr.h minkowski.h
	mpic++ $(INFLAGS) $(CXXFLAGS) -c simple.cpp

gofr.o: gofr.cpp gofr.h
	mpic++ $(INFLAGS) $(CXXFLAGS) -Wall -c gofr.cpp

minkowski.o: minkowski.cpp minkowski.h
	mpic++ $(INFLAGS) $(CXXFLAGS) -Wall -c minkowski.cpp

clean:
	rm -f *.o simple.e *.so
